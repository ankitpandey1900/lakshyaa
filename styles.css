/* Basic external styles */
:root{
  /* Colors */
  --green:#22c55e;--text:#e6edf3;--muted:#9aa4b2;--border:#2a2f3a;--bg:#0b1220;--panel:#111827;--panel2:#0f172a;--accent:#7c3aed;
  /* Typography scale */
  --fs-xs:12px; --fs-sm:14px; --fs-md:16px; --fs-lg:18px; --fs-xl:22px; --fs-xxl:26px;
  /* Spacing scale */
  --space-2:2px; --space-4:4px; --space-6:6px; --space-8:8px; --space-10:10px; --space-12:12px; --space-16:16px; --space-20:20px;
  /* Radius */
  --radius-6:6px; --radius-8:8px; --radius-10:10px; --radius-12:12px;
}
html,body{background:var(--bg);color:var(--text)}
.container{padding:var(--space-12)}
.section{margin-bottom:16px}
.card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius-12);padding:12px;box-shadow:0 2px 10px rgba(0,0,0,.25);transition:border-color .2s ease, box-shadow .2s ease, transform .1s ease}
.card:hover{border-color:#334155;box-shadow:0 6px 24px rgba(0,0,0,.35)}
.row{display:flex;gap:8px;align-items:center}
.input{padding:6px 8px;border:1px solid var(--border);border-radius:var(--radius-8);background:#0b1220;color:var(--text)}
button{padding:6px 10px;border-radius:var(--radius-8);border:1px solid var(--border);background:var(--panel2);color:var(--text);cursor:pointer;transition:background-color .2s ease, border-color .2s ease, box-shadow .2s ease, transform .05s ease}
button:hover{background:#152039;border-color:#364152}
button:active{transform:scale(0.98)}
button.primary{background:linear-gradient(135deg,var(--green),#14b8a6);color:#0b1220;border-color:#0b1220;font-weight:600}
button.primary:hover{filter:brightness(1.05)}
/* Button variants */
button.secondary{background:#162033;border-color:#2b3750}
button.secondary:hover{background:#1a2740;border-color:#384a6b}
button.ghost{background:transparent;border-color:#314055}
button.ghost:hover{background:#0f172a;border-color:#3a4b68}
h2{font-size:var(--fs-lg);margin:0 0 8px}
.muted{color:var(--muted);font-size:var(--fs-xs)}
ul{list-style:none;padding:0;margin:8px 0 0}
li{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:6px 0;border-bottom:1px dashed #eee}
.task-title{flex:1}
.progress{height:8px;background:#1f2937;border-radius:6px;overflow:hidden}
 .progress>div{height:100%;background:linear-gradient(90deg,#22c55e,#10b981);width:0%;transition:width .2s ease}
.tabs{display:flex;gap:8px;margin-bottom:8px}
.tab{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:var(--panel2);cursor:pointer;color:var(--muted)}
.tab.active{background:var(--accent);color:#fff;border-color:transparent}
.tab-panel{display:flex;flex-direction:column}
.tab-panel ul{flex:1}
.pill{background:#0b1220;border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:11px;color:var(--muted)}
.actions{display:flex;gap:6px}
.small{font-size:var(--fs-xs)}
.hidden{display:none}
/* Helpers */
.text-center{text-align:center}
.bigger{font-size:var(--fs-lg)}
body.big .bigger{font-size:var(--fs-xl)}
.xxl{font-size:var(--fs-xl);font-weight:600;line-height:1.35}
body.big .xxl{font-size:36px;font-weight:700;line-height:1.35}
.history-note{margin-top:8px}
/* Toasts */
.toast{position:fixed;bottom:16px;right:16px;background:var(--panel2);border:1px solid var(--border);padding:10px 12px;border-radius:10px;color:var(--text);box-shadow:0 4px 20px rgba(0,0,0,.35);opacity:0;transform:translateY(8px);transition:opacity .2s ease, transform .2s ease;z-index:9999}
.toast.show{opacity:1;transform:translateY(0)}
.btn-loading{opacity:.7;pointer-events:none}
.btn-loading::after{content:'â€¦';margin-left:6px}

/* Minor spacing + contrast */
.section + .section{margin-top:20px}
label.muted{color:#a6b0bd}
button:focus, .input:focus {outline:2px solid #7c3aed33; outline-offset:2px}

/* Countdown segments */
.countdown{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
.countdown .segment{background:#0b1220;border:1px solid var(--border);border-radius:10px;padding:10px;text-align:center}
.countdown .num{font-size:22px;font-weight:800;color:#e5e7eb}
.countdown .label{font-size:11px;color:var(--muted)}

/* Settings drawer */
.drawer{position:fixed;top:0;right:0;height:100vh;width:420px;background:var(--panel);border-left:1px solid var(--border);box-shadow:-8px 0 24px rgba(0,0,0,.35);transform:translateX(100%);transition:transform .25s ease;z-index:9999;padding:16px;overflow:auto}
.drawer.open{transform:translateX(0)}
.drawer header{position:relative;display:flex;justify-content:center;align-items:center;margin-bottom:12px}
.drawer header #close-settings{position:absolute;right:0}
.drawer .row{justify-content:center}
.drawer .group{display:flex;flex-direction:column;gap:8px}
.drawer .input, .drawer button{width:100%}
.drawer .section{max-width:380px;margin:0 auto}
.icon-btn{background:transparent;border:1px solid var(--border);border-radius:var(--radius-8);padding:6px 10px;color:var(--text);transition:background-color .2s ease,border-color .2s ease}
.icon-btn:hover{background:#0f172a;border-color:#3a4b68}

/* Pomodoro */
.pomo{display:flex;align-items:center;gap:12px}
.pomo .ring{width:120px;height:120px;border-radius:50%;background:conic-gradient(var(--accent) 0deg, #253041 0deg);display:flex;align-items:center;justify-content:center;box-shadow:inset 0 0 0 8px #0b1220, 0 2px 10px rgba(0,0,0,.4)}
.pomo .time{font-size:26px;font-weight:800}
.pomo .controls{display:flex;gap:8px}
.pomo .mode{font-size:12px;color:var(--muted)}

/* Center the Today section */
#today-section h2{text-align:center}
#today-section .pomo{justify-content:center}
#today-section .row{justify-content:center}
#today-section .pomo,
#today-section .row,
#today-section .progress,
#today-section ul{max-width:840px;margin-left:auto;margin-right:auto;width:100%}

/* Center + cap width for Deadline */
#deadline-section h2{text-align:center}
#deadline-section .row{justify-content:center}
#deadline-section #deadline-note,
#deadline-section #countdown,
#deadline-section #countdown-human,
#deadline-section .row{max-width:840px;margin-left:auto;margin-right:auto;width:100%}

/* Center + cap width for History/Backlog */
.section.card .tabs{justify-content:center}
#history ul, #backlog ul{max-width:960px;margin-left:auto;margin-right:auto;width:100%}
#history .history-note{max-width:960px;margin-left:auto;margin-right:auto}

/* Deadline status emphasis */
#deadline-status.due-soon{color:#f59e0b;font-weight:700}
#deadline-status.overdue{color:#ef4444;font-weight:700}
/* Subtle attention animation for overdue */
@keyframes pulse-text{0%{text-shadow:0 0 0 rgba(239,68,68,.0)}50%{text-shadow:0 0 8px rgba(239,68,68,.45)}100%{text-shadow:0 0 0 rgba(239,68,68,.0)}}
#deadline-status.overdue{animation:pulse-text 1.6s ease-in-out infinite}

/* Big mode scaling for full-page UI */
body.big { font-size: var(--fs-md); }
body.big h2 { font-size: var(--fs-xl); }
body.big .input { padding: 10px 12px; font-size: 16px; }
body.big button { padding: 10px 14px; font-size: 16px; }
body.big .pill { font-size: 13px; }
body.big .small { font-size: 14px; }
body.big .countdown .num { font-size: 34px; }
body.big .countdown .label { font-size: 13px; }
body.big .pomo .ring { width: 180px; height: 180px; box-shadow: inset 0 0 0 10px #0b1220, 0 4px 16px rgba(0,0,0,.45); }
body.big .pomo .time { font-size: 34px; }
body.big .tabs .tab { font-size: 14px; }
/* Keep wide but allow readability caps via page's own rule */
body.big .container, body.big .page { max-width: 100%; }

/* Sticky quick bar */
.quickbar{position:sticky;top:0;z-index:5000;background:rgba(11,18,32,.75);backdrop-filter:blur(6px);border-bottom:1px solid var(--border)}
.quickbar .inner{display:flex;align-items:center;gap:8px;padding:6px 10px;max-width:960px;margin:0 auto}
.quickbar .logo{width:22px;height:22px;display:block;border-radius:4px}
.quickbar .qb-time{font-variant-numeric:tabular-nums;font-weight:800;letter-spacing:0.3px;min-width:58px;text-align:center}
.quickbar .qb-mode{min-width:48px;text-align:center}
.quickbar .inner .input{padding:6px 8px}
.quickbar .inner .spacer{flex:1}

